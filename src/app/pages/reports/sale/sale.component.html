<div class="main-content">
  <div class="container-fluid p-3">

    <!-- Filters Row -->
    <div class="d-flex flex-wrap align-items-center gap-3">

      <!-- This Month Dropdown -->
      <div class="dropdown">
        <button class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
          This Month
        </button>
      </div>

      <!-- Date Range Inputs -->
      <div class="input-group flex-wrap" style="min-width: 250px;">
        <span class="input-group-text">Between</span>
        <input type="date" class="form-control" [(ngModel)]="fromDate">
        <span class="input-group-text">To</span>
        <input type="date" class="form-control" [(ngModel)]="toDate">
      </div>

      <!-- Firm Selector -->
      <select class="form-select w-auto" [(ngModel)]="selectedFirm">
        <option *ngFor="let firm of firms">{{ firm }}</option>
      </select>

      <!-- User Selector -->
      <select class="form-select w-auto" [(ngModel)]="selectedUser">
        <option *ngFor="let user of users">{{ user }}</option>
      </select>

      <!-- Icons Row (Right-Aligned) -->
      <div class="d-flex gap-3 ms-auto">
        <i class="bi bi-bar-chart fs-4" title="Graph"></i>
        <i class="bi bi-file-earmark-excel fs-4" title="Excel Report"></i>
        <i class="bi bi-printer fs-4" title="Print"></i>
      </div>
    </div>

    <!-- Summary Cards -->
    <div class="d-flex justify-content-center gap-3 my-4 flex-wrap">
      <div class="card text-white bg-success p-3 text-center" style="min-width: 150px;">
        <h5>Paid</h5>
        <h4>₹ {{ paidAmount | number:'1.4-4' }}</h4>
      </div>
      <div class="card text-white bg-primary p-3 text-center" style="min-width: 150px;">
        <h5>Unpaid</h5>
        <h4>₹ {{ unpaidAmount | number:'1.4-4' }}</h4>
      </div>
      <div class="card text-white bg-warning p-3 text-center" style="min-width: 150px;">
        <h5>Total</h5>
        <h4>₹ {{ (paidAmount + unpaidAmount) | number:'1.4-4' }}</h4>
      </div>
    </div>

    <!-- Search & Add Sale -->
    <div class="d-flex flex-wrap justify-content-between align-items-center my-2 gap-2">
      <input type="text" class="form-control w-100 w-md-25" placeholder="Search Transactions..." [(ngModel)]="searchTerm">
      <button class="btn btn-primary w-100 w-md-auto" (click)="navigateToNewComponent(); openComponent('AddSale')">
        <i class="bi bi-plus-circle"></i> Add Sale
      </button>
    </div>

    <!-- Table -->
    <div class="table-responsive">
      <table class="table table-hover table-bordered">
        <thead class="table-light">
          <tr>
            <th>Date</th>
            <th>Invoice</th>
            <th>Party Name</th>
            <th>Transaction Type</th>
            <th>Payment Type</th>
            <th>Amount</th>
            <th>Balance</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="transactions.length === 0">
            <td colspan="7" class="text-center">No transactions to show</td>
          </tr>
          <tr *ngFor="let tx of transactions">
            <td>{{ tx.date }}</td>
            <td>{{ tx.invoice }}</td>
            <td>{{ tx.partyName }}</td>
            <td>{{ tx.transactionType }}</td>
            <td>{{ tx.paymentType }}</td>
            <td>₹ {{ tx.amount }}</td>
            <td>₹ {{ tx.balance }}</td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>
